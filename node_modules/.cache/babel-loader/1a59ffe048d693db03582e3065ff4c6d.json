{"ast":null,"code":"import _toConsumableArray from\"/Users/yujis/Documents/fullstack/React-Python/test/typescript-django-todoapp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/yujis/Documents/fullstack/React-Python/test/typescript-django-todoapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./App.css';import axios from'axios';import{API_URL}from\"./API.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],settext=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),todos=_useState4[0],setTodos=_useState4[1];//  DB内に保存されている全ての値を表示させる。\nuseEffect(function(){axios.get(API_URL+\"todo_list/\").then(function(res){return setTodos(res.data);});},[]);var handleChange=function handleChange(e){settext(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();// todo  作成\nvar newTodo={id:todos.length,text:text,completed:false};axios.post(API_URL+\"create/\",newTodo).then(function(){console.log(\"todo created\");});setTodos([newTodo].concat(_toConsumableArray(todos)));settext(\"\");};var handleEdit=function handleEdit(id,text){var newTodos=todos.map(function(todo){if(todo.id===id){todo.text=text;// todo の内容を更新。todoはobject型でid, text, compleatedを更新させる。\naxios.post(API_URL+\"update/\"+todo.id+\"/\",todo).then(function(){console.log(\"todo Edit updated\");});}return todo;});setTodos(newTodos);};var handleCheckd=function handleCheckd(id,completed){var newTodos=todos.map(function(todo){if(todo.id===id){todo.completed=!completed;axios.post(API_URL+\"update/\"+todo.id+\"/\",todo).then(function(){console.log(\"todo cheackd updated\");});}return todo;});setTodos(newTodos);};var handleDelete=function handleDelete(id){// バックグラウンドだけ消す。\nvar DelTodos=todos.filter(function(todo){if(todo.id===id){axios.delete(API_URL+\"delete/\"+todo.id+\"/\").then(function(){console.log(\"todo deleted\");});}return todo;});// 消した結果のtodoリストを読み込む\nvar newTodos=todos.filter(function(todo){return todo.id!==id;});setTodos(newTodos);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Todolist with TypeScript\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:function onSubmit(e){handleSubmit(e);},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){handleChange(e);},className:\"inputText\",value:text}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"\\u4F5C\\u6210\",className:\"submitButton\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:todos.map(function(todo){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){handleEdit(todo.id,e.target.value);},className:\"EditText\",value:todo.text,disabled:todo.completed}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:function onChange(e){handleCheckd(todo.id,todo.completed);},className:\"CheckBox\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleDelete(todo.id);},className:\"DeleteButton\",children:\"Delete\"})]},todo.id);})})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","API_URL","App","text","settext","todos","setTodos","get","then","res","data","handleChange","e","target","value","handleSubmit","preventDefault","newTodo","id","length","completed","post","console","log","handleEdit","newTodos","map","todo","handleCheckd","handleDelete","DelTodos","filter","delete"],"sources":["/Users/yujis/Documents/fullstack/React-Python/test/typescript-django-todoapp/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\n\nimport axios from 'axios';\nimport { API_URL } from \"./API.js\"\n\nfunction App() {\n\n  const [text, settext] = useState(\"\");\n  const [todos, setTodos] = useState<Todo[]>([]);\n\n  type Todo = {\n    id: number;\n    text: string;\n    completed: boolean;\n  };\n\n  //  DB内に保存されている全ての値を表示させる。\n  useEffect(() => {\n    axios.get(API_URL + \"todo_list/\")\n      .then(res => setTodos(res.data));\n  }, []);\n\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    settext(e.target.value)\n  };\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    // todo  作成\n    const newTodo: Todo = {\n      id: todos.length,\n      text: text,\n      completed: false,\n    };\n\n    axios.post(API_URL + \"create/\", newTodo)\n      .then(() => {\n        console.log(\"todo created\");\n      })\n\n    setTodos([newTodo, ...todos]);\n    settext(\"\");\n  };\n\n  const handleEdit = (id: number, text: string) => {\n\n    const newTodos = todos.map((todo) => {\n      if (todo.id === id) {\n        todo.text = text;\n        // todo の内容を更新。todoはobject型でid, text, compleatedを更新させる。\n        axios.post(API_URL + \"update/\" + todo.id + \"/\", todo)\n          .then(() => {\n            console.log(\"todo Edit updated\")\n          })\n      }\n      return todo;\n    });\n\n    setTodos(newTodos);\n  };\n\n  const handleCheckd = (id: number, completed: boolean) => {\n\n    const newTodos = todos.map((todo) => {\n      if (todo.id === id) {\n        todo.completed = !completed;\n        axios.post(API_URL + \"update/\" + todo.id + \"/\", todo)\n          .then(() => {\n            console.log(\"todo cheackd updated\")\n          })\n      }\n      return todo;\n    });\n\n    setTodos(newTodos);\n\n  };\n\n  const handleDelete = (id: number) => {\n\n    // バックグラウンドだけ消す。\n    const DelTodos = todos.filter((todo) => {\n      if (todo.id === id) {\n        axios.delete(API_URL + \"delete/\" + todo.id + \"/\")\n          .then(() => {\n            console.log(\"todo deleted\")\n          })\n      }\n      return todo;\n    });\n\n    // 消した結果のtodoリストを読み込む\n    const newTodos = todos.filter((todo) => todo.id !== id);\n    setTodos(newTodos);\n  };\n\n\n  return (\n    <div className=\"App\">\n      <h2>Todolist with TypeScript</h2>\n      <form action=\"\" onSubmit={(e) => { handleSubmit(e) }}>\n        <input type=\"text\" onChange={(e) => { handleChange(e) }} className=\"inputText\" value={text} />\n        <input type=\"submit\" value=\"作成\" className=\"submitButton\" />\n      </form>\n      <ul>\n        {todos.map((todo) => (\n          <li key={todo.id}>\n            <input type=\"text\"\n              onChange={(e) => { handleEdit(todo.id, e.target.value) }}\n              className=\"EditText\"\n              value={todo.text}\n              disabled={todo.completed} />\n            <input type=\"checkbox\"\n              onChange={(e) => { handleCheckd(todo.id, todo.completed) }}\n              className=\"CheckBox\" />\n            <button onClick={(e) => handleDelete(todo.id)}\n              className=\"DeleteButton\">Delete</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}